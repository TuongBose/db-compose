# Oracle Database Docker Compose
This is a simple Docker Compose configuration to run an **Oracle Database XE 21c** instance.

## Requirements
* Docker
* Docker Compose
* Internet connection (to download the image)
* A terminal to run the commands
* Basic knowledge of Docker and Docker Compose
* Basic knowledge of SQL and Oracle Database
* Basic knowledge of Linux commands

## Installation
1. Clone this repository
2. Edit the environment variables in the `.env` file if needed
3. Run the `docker-compose up -d` command
4. Connect to the Oracle database using:

   * SQL*Plus (CLI)
   * Oracle SQL Developer
   * DBeaver, TablePlus, or other database tools supporting Oracle
5. Stop the container:

   ```bash
   docker compose down
   ```
6. Restart it:

   ```bash
   docker compose up -d
   ```
7. Remove containers and volumes:

   ```bash
   docker compose down -v
   ```
8. Prune all unused Docker volumes:

   ```bash
   docker volume prune
   ```

## Environment Variables

| Variable          | Description                    | Default       |
| ----------------- | ------------------------------ | ------------- |
| `ORACLE_PASSWORD` | SYS and SYSTEM user password   | MyPassword123 |
| `ORACLE_PORT`     | Port exposed to host           | 1521          |
| `ORACLE_USER`     | Custom user created at startup | testdb       |
| `ORACLE_USER_PWD` | Password for the custom user   | test123       |

---

## Access Information

* **Database Host:** `localhost`
* **Port:** `1521`
* **Service Name (default):** `XEPDB1`
* **SYS/SYSTEM Password:** `MyPassword123`
* **Custom User:** `testdb`
* **Custom User Password:** `test123`

> **Note:** This configuration uses the official lightweight Oracle XE 21c image from [gvenzl/oracle-xe](https://hub.docker.com/r/gvenzl/oracle-xe).

---

## Working with Oracle Database

### Accessing the SQL*Plus CLI

1. Enter the container:

   ```bash
   docker exec -it oracle-container bash
   ```

2. Connect as the system user:

   ```bash
   sqlplus system/MyPassword123@XEPDB1
   ```

3. Or connect as your custom user:

   ```bash
   sqlplus testdb/test123@XEPDB1
   ```

---

### Basic SQL Commands

```sql
-- Show all users
SELECT username FROM all_users;

-- Create a new user
CREATE USER my_user IDENTIFIED BY my_password;

-- Grant privileges
GRANT CONNECT, RESOURCE TO my_user;

-- Create a table
CREATE TABLE employees (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    name VARCHAR2(100),
    position VARCHAR2(50),
    salary NUMBER,
    PRIMARY KEY (id)
);

-- Insert data
INSERT INTO employees (name, position, salary)
VALUES ('John Doe', 'Manager', 1200);

-- Query data
SELECT * FROM employees;
```

---

## Connection String Examples

### Java (JDBC)

```java
import java.sql.*;

public class OracleExample {
    public static void main(String[] args) throws Exception {
        String url = "jdbc:oracle:thin:@localhost:1521/XEPDB1";
        String user = "shopapp";
        String password = "shop123";

        Connection conn = DriverManager.getConnection(url, user, password);
        Statement stmt = conn.createStatement();
        ResultSet rs = stmt.executeQuery("SELECT * FROM employees");

        while (rs.next()) {
            System.out.println(rs.getString("name"));
        }

        conn.close();
    }
}
```

### Python (with cx_Oracle)

```python
import cx_Oracle

dsn = cx_Oracle.makedsn("localhost", 1521, service_name="XEPDB1")
connection = cx_Oracle.connect(user="shopapp", password="shop123", dsn=dsn)

cursor = connection.cursor()
cursor.execute("SELECT * FROM employees")

for row in cursor:
    print(row)

cursor.close()
connection.close()
```

### Node.js (with oracledb)

```javascript
const oracledb = require('oracledb');

async function run() {
  let connection;
  try {
    connection = await oracledb.getConnection({
      user: "shopapp",
      password: "shop123",
      connectString: "localhost:1521/XEPDB1"
    });

    const result = await connection.execute("SELECT * FROM employees");
    console.log(result.rows);
  } catch (err) {
    console.error(err);
  } finally {
    if (connection) {
      await connection.close();
    }
  }
}

run();
```

---

## Notes

* The default image uses **Oracle Database XE 21c**.
* Data is persisted in a Docker volume named `oracle`.
* Default database service: **XEPDB1**.
* You can access Oracle Enterprise Manager Express via:
  ðŸ‘‰ [http://localhost:5500/em](http://localhost:5500/em) (if port 5500 is exposed).
* Default system user: `system` / `MyPassword123`.
* Custom user: `shopapp` / `shop123`.
* To list running containers:

  ```bash
  docker ps
  ```
* To connect directly without entering the container:

  ```bash
  docker exec -it oracle-container sqlplus testdb/test123@XEPDB1
  ```